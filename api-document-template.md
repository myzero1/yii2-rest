
API 文档
------------

> * 版本号:1.0.1
> * 修订人:myzero1
> * 修订时间:2019/03/20


**********************

# 1. 目录

<!-- TOC -->

- [1. 目录](#1-目录)
    - [1.1. 使用说明](#11-使用说明)
        - [1.1.1. 使用标题](#111-使用标题)
        - [1.1.2. 返回目录的说明](#112-返回目录的说明)
        - [1.1.3. 标题下面的内容说明](#113-标题下面的内容说明)
    - [1.2. 模板使用](#12-模板使用)
        - [1.2.1. 安装插件](#121-安装插件)
        - [1.2.2. 使用模板](#122-使用模板)
        - [1.2.3. 使用ajax测试api](#123-使用ajax测试api)
        - [1.2.4. api 示例](#124-api-示例)
            - [1.2.4.1. 全局说明](#1241-全局说明)
            - [1.2.4.2. 获取列表](#1242-获取列表)
            - [1.2.4.3. 添加单条记录](#1243-添加单条记录)
            - [1.2.4.4. 获取单条记录](#1244-获取单条记录)
            - [1.2.4.5. 修改单条记录](#1245-修改单条记录)
            - [1.2.4.6. 删除单条记录](#1246-删除单条记录)

<!-- /TOC -->

## 1.1. 使用说明
> [返回目录](#1-目录)

主要的说明都将写在这部分


### 1.1.1. 使用标题
> [返回目录](#1-目录)

*  一级标题被目录占用了
* 二级及以下标题才是真正的标题


### 1.1.2. 返回目录的说明
> [返回目录](#1-目录)

除了目录标题，其它标题下面都加一个“返回目录”


### 1.1.3. 标题下面的内容说明
> [返回目录](#1-目录)

内容和“返回目录”之间空一行，内容和下一个标题之间空2行


## 1.2. 模板使用
> [返回目录](#1-目录)


安装相应的插件（markdown toc），复制模板。


### 1.2.1. 安装插件
> [返回目录](#1-目录)

在vscode中可以直接搜索 markdown toc，并安装就可以了。使用时，鼠标右键选择相应的功能即可


### 1.2.2. 使用模板
> [返回目录](#1-目录)

直接复制本模板到markdown文件中，安装说明，进行相应的编辑就可以了。


### 1.2.3. 使用ajax测试api
> [返回目录](#1-目录)

```js
var url = "http://172.16.62.242:8735/v1/auth/info";
var type = "get"//POST、PUT、DELETE
var authorization = "Bearer Y057DL29xjEwXHAGOVXW9PfGF-xsSIoW_1552974468";
var data = {};

$.ajax({
    url: url,
    type: type,//POST、PUT、DELETE
	//data:JSON.stringify(myData),//你要传的参数
	data: data,//你要传的参数
	processData:false,//是否对参数进行序列化，会把{name:'huang',sex:1}序列化name='huang'&sex=1,默认为true。
	contentType:"application/json",//这里是Header中自带的contentType
    beforeSend: function (xhr) { 
        xhr.setRequestHeader("Authorization", authorization);//你要传的参数
    },
    success: function (data) {
        console.log(data);
    },
    error: function (xhr, textStatus, errorThrow) {
        alert("error:"+xhr.readyState);
    }
});
```


### 1.2.4. api 示例
> [返回目录](#1-目录)

实际的api测试用例如下

**添加记录的示例**

```
请求
curl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{ \ 
   "username": "woogle", \ 
   "password": "woogle", \ 
 }' 'http://host/v1/use'


返回
{
  "code": 0,
  "msg": "success",
  "data": {
    "id": "1",//用户id，程序生成的
    "username": "woogle",//用户名称
    "password": "$2y$13$UOL4KkNvibjBa0J.VmldF.Z826ySLvNHHLEkb72SMsQQYRL1NbrVK"//用户密码，后台加密过的字符串
  }
}


```

**获取单条数据的示例**

```
请求
curl -X GET --header 'Accept: application/json' --header 'Authorization: Bearer ICEHJPlt1qVVGxs-TlIA_DXfHlCf8zXR_1553143717' 'http://host/v1/use/1'

返回
{
  "code": 0,
  "msg": "success",
  "data": {
    "id": "1",
    "username": "woogle",//用户名称
  }
}

```

**获取列表的示例**

```
请求
curl -X GET --header 'Accept: application/json' --header 'Authorization: Bearer ICEHJPlt1qVVGxs-TlIA_DXfHlCf8zXR_1553143717' 'http://host/v1/use'

返回
{
  "code": 200,
  "msg": "OK",
  "data": {
    "total": 4,// 总共4条
    "page": 1,//第一页
    "page_size": 30,//每一页30条
    "items": [
      {
        "id": "1",
        "name": "1"
      },
      {
        "id": "1",
        "name": "1"
      },
      ...
    ]
  }
}

```


#### 1.2.4.1. 全局说明
> [返回目录](#1-目录)

*api请求中有两种状态码，一个是http的状态码，一个是业务的状态码。前者是标准的http状态码，后者只有在前者为200或201的时候才会有。*

*业务状态码说明*

|        业务状态码    |            说明                 |
|---------------------|:-------------------------------:|
|  0 | 返回正确  |
| 7354XX | 客户错误，一般是客户端参数错误  |
| 7355XX | 服务端错，一般是服务端处理出现了意想不到的错误  |


*返回的全局说明*

|        返回的键值    |            说明                 |
|---------------------|:-------------------------------:|
| code | 业务状态码 |
| msg | 返回的文本信息，若有错误会把第一个错误的信息放在这里 |
| data | 返回的实际需要数据 |
| total | 总条数，在列表接口中使用 |
| page | 第几页，在列表接口中使用 |
| page_size | 没有多少条，在列表接口中使用 |
| items | 列表详细数据，在列表接口中使用 |




#### 1.2.4.2. 获取列表
> [返回目录](#1-目录)

`接口基本信息`

|  类别 |  详情     |
|-------|:---------:|
|  用途 | 根据参数获取列表  |
|  方式 | GET  |
|  接口 | /v1/host/user  |
|  contentType | application/json |

`参数说明`

|  名称 |  字段的相关详细说明 | 示例 | 是否必填 （*:必填，默认非必填） |  类型（1:数字，默认字符串） |
|-------|:-----------------:|:----:|:----------------------------:|:-------------------------:|
| name | 用户名称 | "woogle"
| id | 用户Id | 1 | | 1 |


`返回说明（对返回值进行选择性的注释）`

```
{
    "code": 0,
    "msg": "成功"，
    "data": {
        "total": 30,
        "page": 1,
        "page_size": 20,
        "items": [
            {
                "id": 1, //用户id，为数字
                "name": "woogle"//用户名称，为字符串
            },
            {
                "id": 1,
                "name": "woogle"
            },
            ......
        ]
    }
}

```


#### 1.2.4.3. 添加单条记录
> [返回目录](#1-目录)

`接口基本信息`

|  类别 |  详情     |
|-------|:---------:|
|  用途 | 根据参数获取列表  |
|  方式 | POST  |
|  接口 | /v1/host/user  |
|  contentType | application/json |

`参数说明`

|  名称 |  字段的相关详细说明 | 示例 | 是否必填 （*:必填，默认非必填） |  类型（1:数字，默认字符串） |
|-------|:-----------------:|:----:|:----------------------------:|:-------------------------:|
| name | 用户名称 | "woogle"| * |


`返回说明（对返回值进行选择性的注释）`

```
{
    "code": 0,
    "msg": "成功"，
    "data": {
        "id": 1, //用户id，为数字
        "name": "woogle"
    }
}

```


#### 1.2.4.4. 获取单条记录
> [返回目录](#1-目录)

`接口基本信息`

|  类别 |  详情     |
|-------|:---------:|
|  用途 | 根据参数获取列表  |
|  方式 | POST  |
|  接口 | /v1/host/user/{id}  |
|  contentType | application/json |

`参数说明`

|  名称 |  字段的相关详细说明 | 示例 | 是否必填 （*:必填，默认非必填） |  类型（1:数字，默认字符串） |
|-------|:-----------------:|:----:|:----------------------------:|:-------------------------:|
| id | 用户id | 1 | * | 1 |


`返回说明（对返回值进行选择性的注释）`

```
{
    "code": 0,
    "msg": "成功"，
    "data": {
        "id": 1,
        "name": "woogle"
    }
}

```


#### 1.2.4.5. 修改单条记录
> [返回目录](#1-目录)

`接口基本信息`

|  类别 |  详情     |
|-------|:---------:|
|  用途 | 根据参数获取列表  |
|  方式 | PUT  |
|  接口 | /v1/host/user/{id}  |
|  contentType | application/json |

`参数说明`

|  名称 |  字段的相关详细说明 | 示例 | 是否必填 （*:必填，默认非必填） |  类型（1:数字，默认字符串） |
|-------|:-----------------:|:----:|:----------------------------:|:-------------------------:|
| {id} | 用户id | 1 | * | 1 |
| name | 用户名称 | "woogle2" | * | 


`返回说明（对返回值进行选择性的注释）`

```
{
    "code": 0,
    "msg": "成功"，
    "data": {
        "id": 1, 
        "name": "woogle2"
    }
}

```


#### 1.2.4.6. 删除单条记录
> [返回目录](#1-目录)


`接口基本信息`

|  类别 |  详情     |
|-------|:---------:|
|  用途 | 根据参数获取列表  |
|  方式 | DELETE  |
|  接口 | /v1/host/user/{id}  |
|  contentType | application/json |

`参数说明`

|  名称 |  字段的相关详细说明 | 示例 | 是否必填 （*:必填，默认非必填） |  类型（1:数字，默认字符串） |
|-------|:-----------------:|:----:|:----------------------------:|:-------------------------:|
| {id} | 用户id | 1 | * | 1 |


`返回说明（对返回值进行选择性的注释）`

```
{
    "code": 0,
    "msg": "成功"，
    "data": [] // 返回空数组
}

```
